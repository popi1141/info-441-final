<html>
<head>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString)
        var socket = io("/chat");
    </script>
    <script>
        function updateChat(msg, user) {
            let chat = document.getElementById('chatResults')
            console.log(chat)
            let new_msg = `<p>${user}: ${msg} </p>`
            chat.innerHTML = chat.innerHTML + new_msg
        }
        function sendMsg() {
            let textBox = document.getElementById("textInput")
            console.log(textBox.value)
            socket.emit("chat message", textBox.value)
            updateChat(textBox.value, "me!")
            textBox.value = ""
        }
        socket.on("cr", async (msg, user) => {
            console.log(msg)
            updateChat(msg, user)
        })
    </script>

</head>
<body>
    <h1>Youre in the chat lol</h1>

    <input type=text id="textInput">
    <button id="sendBtn" onclick="sendMsg()">send</button>

    <h3>recieved info:</h3>
    <div id="chatResults">
    </div>


</body>
</html>